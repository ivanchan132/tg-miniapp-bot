<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Mini App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <style>
    :root { --safe-bottom: env(safe-area-inset-bottom, 0px); }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
    }

    section {
      display: none;
      width: 100%;
      max-width: 500px;
      flex: 1;
      padding: 20px 20px calc(20px + var(--safe-bottom));
      text-align: center;
      overflow-y: auto;
      box-sizing: border-box;
    }
    section.active { display: block; }

    /* –Ω–∏–∂–Ω–µ–µ –º–µ–Ω—é —Å —É—á—ë—Ç–æ–º safe-area –Ω–∞ –∞–π—Ñ–æ–Ω–µ */
    nav {
      position: fixed;
      bottom: 0; left: 0; right: 0;
      display: flex; justify-content: space-around;
      background: #ffe0b2;
      padding: 10px 10px calc(10px + var(--safe-bottom));
      border-top: 2px solid #ff9800;
      z-index: 10;
      box-sizing: border-box;
    }
    nav button {
      flex: 1; margin: 0 6px; padding: 12px;
      font-size: 20px; border-radius: 12px;
      border: none; background: #ffcc80; cursor: pointer;
    }
    nav button.active { background: #ffb74d; }

    /* –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å—Ü–µ–Ω–∞ */
    #stage {
      position: relative;
      width: 100%;
      max-width: 500px;   /* –Ω–µ —à–∏—Ä–µ 500px, —á—Ç–æ–±—ã –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ –∫—Ä–∞—Å–∏–≤–æ */
      margin: 0 auto;
    }
    canvas {
      display: block;
      width: 100%;       /* —à–∏—Ä–∏–Ω–∞ = —à–∏—Ä–∏–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
      height: auto;      /* –≤—ã—Å–æ—Ç—É –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º –∏–∑ JS, —á—Ç–æ–±—ã –¥–µ—Ä–∂–∞—Ç—å —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ 2:3 */
      background: linear-gradient(to bottom, #87ceeb, #fff);
      border: 2px solid #333;
      border-radius: 10px;
      margin: 0 auto;
    }

    #score { font-size: 22px; margin: 10px; }

    /* –æ–≤–µ—Ä–ª–µ–π –ø–æ–≤–µ—Ä—Ö –∫–∞–Ω–≤–∞—Å–∞ */
    #gameOverBox {
      display: none;
      position: absolute;
      left: 50%; top: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      pointer-events: none; /* —á—Ç–æ–±—ã –∫–ª–∏–∫–∏ –¥–æ—Å—Ç–∞–≤–∞–ª–∏—Å—å –∫–Ω–æ–ø–∫–µ */
    }
    #gameOverText {
      font-size: 28px;
      color: yellow;
      margin-bottom: 15px;
      line-height: 1.4;
      text-shadow: 0 2px 2px rgba(0,0,0,.3);
    }
    #restartBtn {
      background: #ffeb3b;
      color: black;
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      pointer-events: auto; /* —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –±—ã–ª–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–π */
    }
  </style>
</head>
<body>

  <!-- –ò–≥—Ä–∞ -->
  <section id="game" class="active">
    <div id="score">–û—á–∫–∏: 0</div>

    <!-- –°–¶–ï–ù–ê: –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div id="stage">
      <canvas id="gameCanvas"></canvas>

      <!-- –û–≤–µ—Ä–ª–µ–π –ø—Ä–∏ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –∏–≥—Ä—ã -->
      <div id="gameOverBox">
        <div id="gameOverText">–û—Ç–ª–∏—á–Ω–æ! <br> –ü–æ–ø—Ä–æ–±—É–µ–º –µ—â—ë?</div>
        <button id="restartBtn" onclick="restartGame()">–ó–∞–Ω–æ–≤–æ</button>
      </div>
    </div>
  </section>

  <!-- –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ -->
  <section id="congrats">
    <h2>–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Ç–µ–±—è —Å –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º üéâ</h2>
    <p>–ü—É—Å—Ç—å –≤ –∂–∏–∑–Ω–∏ –±—É–¥–µ—Ç –±–æ–ª—å—à–µ —Ä–∞–¥–æ—Å—Ç–∏, —è—Ä–∫–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤ –∏ —Å—á–∞—Å—Ç–ª–∏–≤—ã—Ö –¥–Ω–µ–π ‚ù§Ô∏è</p>
  </section>

  <!-- –ü–æ–¥–∞—Ä–æ–∫ -->
  <section id="gift">
    <h2>–ü–æ–¥–∞—Ä–æ–∫ üéÅ</h2>
    <p>–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:</p>
    <input type="password" id="giftPass" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
    <button onclick="checkPassword()">–û—Ç–∫—Ä—ã—Ç—å</button>
    <div id="giftContent" style="display:none;">
      <img src="certificate1.jpg" alt="–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç 1" style="max-width:100%; border:2px solid #333; border-radius:10px;">
      <img src="certificate2.jpg" alt="–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç 2" style="max-width:100%; border:2px solid #333; border-radius:10px; margin-top:10px;">
    </div>
  </section>

  <!-- –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å -->
  <section id="feedback">
    <h2>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h2>
    <input type="text" placeholder="–í–∞—à–µ –∏–º—è">
    <textarea rows="4" placeholder="–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"></textarea>
    <button>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </section>

  <!-- –ú–µ–Ω—é -->
  <nav>
    <button class="active" onclick="showSection('game')">üéÆ</button>
    <button onclick="showSection('congrats')">üíå</button>
    <button onclick="showSection('gift')">üéÅ</button>
    <button onclick="showSection('feedback')">‚úçÔ∏è</button>
  </nav>

  <script>
    /* –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–π */
    function showSection(id) {
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      event.target.classList.add('active');
      // –ø—Ä–∏ —Å–º–µ–Ω–µ —Å–µ–∫—Ü–∏–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –∫–∞–Ω–≤–∞—Å (–Ω–∞ —Å–ª—É—á–∞–π –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ–π –≤—ã—Å–æ—Ç—ã)
      if (id === 'game') resizeCanvas();
    }

    /* –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è –∫ –ø–æ–¥–∞—Ä–∫—É */
    function checkPassword() {
      const pass = document.getElementById('giftPass').value;
      if (pass === "1234") {
        document.getElementById('giftContent').style.display = 'block';
      } else {
        alert("–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!");
      }
    }

    // --------- –ò–ì–†–ê (–∞–¥–∞–ø—Ç–∏–≤: VIEW_W/VIEW_H) ---------
    const stage   = document.getElementById('stage');
    const canvas  = document.getElementById('gameCanvas');
    const ctx     = canvas.getContext('2d');
    const overBox = document.getElementById('gameOverBox');
    const overTxt = document.getElementById('gameOverText');

    // –±–∞–∑–æ–≤–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω –∏–≥—Ä—ã 2:3 (–∫–∞–∫ 400x600)
    const RATIO = 3/2; // height/width
    let VIEW_W = 400;  // –ª–æ–≥–∏—á–µ—Å–∫–∞—è —à–∏—Ä–∏–Ω–∞ –≤ CSS-–ø–∏–∫—Å–µ–ª—è—Ö
    let VIEW_H = 600;  // –ª–æ–≥–∏—á–µ—Å–∫–∞—è –≤—ã—Å–æ—Ç–∞ –≤ CSS-–ø–∏–∫—Å–µ–ª—è—Ö

    function resizeCanvas() {
      // —à–∏—Ä–∏–Ω–∞ = —à–∏—Ä–∏–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
      const containerW = stage.clientWidth;
      // –ø—ã—Ç–∞—Ç—å—Å—è –¥–µ—Ä–∂–∞—Ç—å –≤—ã—Å–æ—Ç—É = —à–∏—Ä–∏–Ω–∞ * 1.5, –Ω–æ –Ω–µ –∑–∞–ª–µ–∑—Ç—å –ø–æ–¥ –Ω–∏–∂–Ω–µ–µ –º–µ–Ω—é
      const nav = document.querySelector('nav');
      const safeBottom = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--safe-bottom')) || 0;
      const availableH = window.innerHeight - nav.offsetHeight - 40 - safeBottom; // –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É

      let targetW = containerW;
      let targetH = Math.min(targetW * RATIO, availableH);

      // –µ—Å–ª–∏ –ø–æ –≤—ã—Å–æ—Ç–µ —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ, –ø–æ–¥–∂–∞—Ç—å —à–∏—Ä–∏–Ω—É
      if (targetH < targetW * RATIO) {
        targetW = Math.min(containerW, availableH / RATIO);
        targetH = targetW * RATIO;
      }

      VIEW_W = Math.max(280, Math.floor(targetW)); // –Ω–µ –º–µ–Ω—å—à–µ 280 –ø–æ —à–∏—Ä–∏–Ω–µ
      VIEW_H = Math.floor(targetH);

      // —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä –∫–∞–Ω–≤–∞—Å–∞ –ø–æ–¥ DPR
      const dpr = Math.min(window.devicePixelRatio || 1, 2); // –æ–≥—Ä–∞–Ω–∏—á–∏–º –¥–æ 2—Ö, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å
      canvas.style.width  = VIEW_W + 'px';
      canvas.style.height = VIEW_H + 'px';
      canvas.width  = Math.round(VIEW_W * dpr);
      canvas.height = Math.round(VIEW_H * dpr);

      // –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∞–∫, —á—Ç–æ–±—ã 1 –ª–æ–≥–∏—á–µ—Å–∫–∞—è –µ–¥–∏–Ω–∏—Ü–∞ = 1 CSS-px
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

      // —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –æ–≤–µ—Ä–ª–µ–π (–æ–Ω –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç—Å—è –æ—Ç –∫—Ä–∞—è stage, —Ç–∞–∫ —á—Ç–æ –≤—Å—ë –æ–∫)
      // (–Ω–∏—á–µ–≥–æ –¥–æ–ø. –¥–µ–ª–∞—Ç—å –Ω–µ –Ω–∞–¥–æ)
    }

    let bird, pipes, frame, score, gameOver;
    let clouds = [];

    /* –û–±–ª–∞–∫–∞ */
    function initClouds() {
      clouds = Array.from({ length: 6 }, () => ({
        x: Math.random() * VIEW_W,
        y: Math.random() * (VIEW_H * 0.4) + 20,
        r: 20 + Math.random() * 25,
        speed: 0.2 + Math.random() * 0.4
      }));
    }
    function updateClouds() {
      clouds.forEach(c => {
        c.x -= c.speed;
        if (c.x < -c.r * 3) {
          c.x = VIEW_W + c.r * 3;
          c.y = Math.random() * (VIEW_H * 0.4) + 20;
          c.r = 20 + Math.random() * 25;
          c.speed = 0.2 + Math.random() * 0.4;
        }
      });
    }
    function drawClouds() {
      ctx.save();
      ctx.globalAlpha = 0.85;
      ctx.fillStyle = "#ffffff";
      clouds.forEach(c => {
        ctx.beginPath();
        ctx.ellipse(c.x, c.y, c.r, c.r * 0.6, 0, 0, Math.PI * 2);
        ctx.fill();
      });
      ctx.restore();
    }

    // –ü—Ç–∏—Ü–∞-—Å–µ—Ä–¥—Ü–µ
    function initGame() {
      // —Å–µ—Ä–¥—Ü–µ —á—É—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –æ—Ç –≤—ã—Å–æ—Ç—ã
      const heartSize = Math.max(22, Math.floor(VIEW_H * 0.05));
      bird = { x: Math.floor(VIEW_W * 0.125), y: Math.floor(VIEW_H * 0.25),
               width: heartSize, height: heartSize,
               gravity: 0.6, lift: -8, velocity: 0 };

      pipes = [];
      frame = 0;
      score = 0;
      gameOver = false;
      document.getElementById("score").innerText = "–û—á–∫–∏: 0";
      overBox.style.display = "none";
      initClouds();
    }

    function drawBird() {
      ctx.font = `${bird.height}px Arial`;
      ctx.textAlign = 'left'; // –±—É–¥–µ–º —Ä–∏—Å–æ–≤–∞—Ç—å –ø–æ —Å—Ç–∞—Ä—ã–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
      ctx.fillText("üíõ", bird.x - Math.floor(bird.width/2), bird.y + Math.floor(bird.height/3));
    }
    function updateBird() {
      bird.velocity += bird.gravity;
      bird.y += bird.velocity;
      if (bird.y + bird.height / 2 >= VIEW_H) gameOver = true;
      if (bird.y - bird.height / 2 <= 0) { bird.y = bird.height / 2; bird.velocity = 0; }
    }

    // –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Ç—Ä—É–±—ã (—Ä–∏—Å–æ–≤–∞–ª–∫–∞ –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ —à–∞–≥–∞)
    function roundedRect(ctx, x, y, w, h, r) {
      const rr = Math.min(r, w/2, h/2);
      ctx.beginPath();
      ctx.moveTo(x + rr, y);
      ctx.arcTo(x + w, y,     x + w, y + rr, rr);
      ctx.arcTo(x + w, y + h, x + w - rr, y + h, rr);
      ctx.arcTo(x,     y + h, x,     y + h - rr, rr);
      ctx.arcTo(x,     y,     x + rr, y, rr);
      ctx.closePath();
    }
    function makePipeGradient(y, y2) {
      const g = ctx.createLinearGradient(0, y, 0, y2);
      g.addColorStop(0,   '#4caf50');
      g.addColorStop(0.5, '#66bb6a');
      g.addColorStop(1,   '#388e3c');
      return g;
    }
    function drawHighlight(x, y, h) {
      ctx.save(); ctx.globalAlpha = 0.25; ctx.fillStyle = '#fff';
      ctx.fillRect(x + 6, y + 8, 6, h - 16);
      ctx.restore();
    }
    function drawCap(x, y, w, h) {
      const r = 8;
      const grad = ctx.createLinearGradient(0, y, 0, y + h);
      grad.addColorStop(0, '#2e7d32'); grad.addColorStop(1, '#1b5e20');
      ctx.fillStyle = grad; roundedRect(ctx, x - 6, y, w + 12, h, r); ctx.fill();
      ctx.save(); ctx.globalAlpha = 0.35; ctx.fillStyle = '#fff';
      roundedRect(ctx, x - 4, y + 3, w + 8, 4, 2); ctx.fill(); ctx.restore();
      ctx.strokeStyle = '#1b5e20'; ctx.lineWidth = 2;
      roundedRect(ctx, x - 6, y, w + 12, h, r); ctx.stroke();
    }
    function drawPipeBody(x, y, w, h, radius = 10) {
      const grad = makePipeGradient(y, y + h);
      ctx.save(); ctx.fillStyle = 'rgba(0,0,0,0.15)';
      roundedRect(ctx, x + 3, y + 3, w, h, radius); ctx.fill(); ctx.restore();
      ctx.fillStyle = grad; roundedRect(ctx, x, y, w, h, radius); ctx.fill();
      drawHighlight(x, y, h);
      ctx.strokeStyle = '#1b5e20'; ctx.lineWidth = 2;
      roundedRect(ctx, x, y, w, h, radius); ctx.stroke();
    }

    let pipeWidth = 50; // –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–∏–∫—Å–µ–ª–∏, –Ω–∏–∂–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –æ—Ç VIEW_W
    function drawPipes() {
      const lipH = 16;
      const radius = 10;
      pipes.forEach(pipe => {
        const x = pipe.x, w = pipe.width;
        // –≤–µ—Ä—Ö
        drawPipeBody(x, 0, w, pipe.top, radius);
        drawCap(x, pipe.top - lipH, w, lipH);
        // –Ω–∏–∑
        const bottomY = VIEW_H - pipe.bottom;
        drawCap(x, bottomY, w, lipH);
        drawPipeBody(x, bottomY + lipH, w, pipe.bottom - lipH, radius);
      });
    }

    function updatePipes() {
      // —á–∞—Å—Ç–æ—Ç–∞ —Å–ø–∞–≤–Ω–∞ –∏ —Ä–∞–∑–º–µ—Ä—ã –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–æ–¥ —à–∏—Ä–∏–Ω—É
      const spawnEvery = 140;          // –∫–∞–¥—Ä—ã
      const pipeSpeed  = Math.max(2, Math.round(VIEW_W / 200)); // —Å–∫–æ—Ä–æ—Å—Ç—å –≤ –ª–æ–≥. –ø–∏–∫—Å–µ–ª—è—Ö/–∫–∞–¥—Ä
      pipeWidth = Math.max(40, Math.round(VIEW_W * 0.12));      // —à–∏—Ä–∏–Ω–∞ —Ç—Ä—É–±—ã ~12% —à–∏—Ä–∏–Ω—ã

      if (frame % spawnEvery === 0) {
        const maxTop = VIEW_H / 2;
        const top = Math.random() * maxTop;
        const gap = Math.max(130, Math.round(VIEW_H * 0.25));   // –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –∑–∞–∑–æ—Ä ~25% –≤—ã—Å–æ—Ç—ã
        const bottom = VIEW_H - top - gap;
        pipes.push({ x: VIEW_W, width: pipeWidth, top, bottom, passed:false });
      }

      pipes.forEach(pipe => {
        pipe.x -= pipeSpeed;

        // —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ
        if (
          bird.x + bird.width / 2 > pipe.x &&
          bird.x - bird.width / 2 < pipe.x + pipe.width &&
          (bird.y - bird.height / 2 < pipe.top ||
           bird.y + bird.height / 2 > VIEW_H - pipe.bottom)
        ) gameOver = true;

        // –æ—á–∫–∏ ‚Äî –ø—Ä–∏ –ø–æ–ª–Ω–æ–º –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏
        if (!pipe.passed && pipe.x + pipe.width < bird.x - bird.width/2) {
          pipe.passed = true;
          score++;
          document.getElementById("score").innerText = "–û—á–∫–∏: " + score;
        }
      });

      pipes = pipes.filter(pipe => pipe.x + pipe.width > 0);
    }

    function draw() {
      ctx.clearRect(0, 0, VIEW_W, VIEW_H);
      drawClouds();
      drawPipes();
      drawBird();
    }
    function update() { updateClouds(); updateBird(); updatePipes(); }

    function loop() {
      if (gameOver) {
        // –ø—Ä–∞–≤–∏–ª–∞ —Ç–µ–∫—Å—Ç–∞: 17 ‚Üí –π—Ü—É–∫–µ–Ω; 29 ‚Üí —Ñ—ã–≤–∞–ø; –∏–Ω–∞—á–µ –¥–µ—Ñ–æ–ª—Ç
        if (score === 17) {
          overTxt.innerHTML = "–π—Ü—É–∫–µ–Ω";
        } else if (score === 29) {
          overTxt.innerHTML = "—Ñ—ã–≤–∞–ø";
        } else {
          overTxt.innerHTML = "–û—Ç–ª–∏—á–Ω–æ! <br> –ü–æ–ø—Ä–æ–±—É–µ–º –µ—â—ë?";
        }
        overBox.style.display = "block";
        return;
      }
      update(); draw();
      frame++;
      requestAnimationFrame(loop);
    }

    function restartGame() { initGame(); loop(); }

    // —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    document.addEventListener("keydown", () => { if (!gameOver) bird.velocity = bird.lift; }, {passive:true});
    document.addEventListener("click",  () => { if (!gameOver) bird.velocity = bird.lift; }, {passive:true});
    document.addEventListener("touchstart", () => { if (!gameOver) bird.velocity = bird.lift; }, {passive:true});

    // –ø–µ—Ä–≤–∏—á–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Ä–µ—Å–∞–π–∑/–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é
    function start() { resizeCanvas(); initGame(); loop(); }
    window.addEventListener('resize', () => { resizeCanvas(); });              // –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤
    window.addEventListener('orientationchange', () => { setTimeout(resizeCanvas, 300); }); // –ø—Ä–∏ –ø–æ–≤–æ—Ä–æ—Ç–µ

    start();
  </script>
</body>
</html>
