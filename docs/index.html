<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Mini App</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
    }

    section {
      display: none;
      width: 100%;
      max-width: 500px;
      flex: 1;
      padding: 20px;
      text-align: center;
      overflow-y: auto;
    }
    section.active { display: block; }

    /* –Ω–∏–∂–Ω–µ–µ –º–µ–Ω—é */
    nav {
      position: fixed;
      bottom: 0; left: 0; right: 0;
      display: flex; justify-content: space-around;
      background: #ffe0b2;
      padding: 10px;
      border-top: 2px solid #ff9800;
      z-index: 10;
    }
    nav button {
      flex: 1; margin: 0 6px; padding: 12px;
      font-size: 20px; border-radius: 12px;
      border: none; background: #ffcc80; cursor: pointer;
    }
    nav button.active { background: #ffb74d; }

    canvas {
      background: linear-gradient(to bottom, #87ceeb, #fff);
      border: 2px solid #333;
      border-radius: 10px;
      display: block;
      margin: auto;
    }

    #score { font-size: 22px; margin: 10px; }

    /* –ö–Ω–æ–ø–∫–∞ —Ä–µ—Å—Ç–∞—Ä—Ç–∞ (–≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ game over) */
    #restartBtn {
      background: #ffeb3b;
      color: black;
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    /* –û–≤–µ—Ä–ª–µ–π —Å —Ç–µ–∫—Å—Ç–æ–º –∏ –∫–Ω–æ–ø–∫–æ–π –Ω–∞–¥ –∫–∞–Ω–≤–∞—Å–æ–º */
    #gameOverBox {
      display: none;
      position: absolute;
      left: 50%; top: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }
    #gameOverText {
      font-size: 28px;
      color: yellow;
      margin-bottom: 15px;
      line-height: 1.4;
    }
  </style>
</head>
<body>

  <!-- –ò–≥—Ä–∞ -->
  <section id="game" class="active">
    <div id="score">–û—á–∫–∏: 0</div>
    <div style="position: relative; display:inline-block;">
      <canvas id="gameCanvas" width="400" height="600"></canvas>

      <!-- –û–≤–µ—Ä–ª–µ–π –ø—Ä–∏ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –∏–≥—Ä—ã: —Ç–µ–∫—Å—Ç + –∫–Ω–æ–ø–∫–∞ "–ó–∞–Ω–æ–≤–æ" -->
      <div id="gameOverBox">
        <div id="gameOverText">–û—Ç–ª–∏—á–Ω–æ! <br> –ü–æ–ø—Ä–æ–±—É–µ–º –µ—â—ë?</div>
        <button id="restartBtn" onclick="restartGame()">–ó–∞–Ω–æ–≤–æ</button>
      </div>
    </div>
  </section>

  <!-- –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ -->
  <section id="congrats">
    <h2>–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Ç–µ–±—è —Å –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º üéâ</h2>
    <p>–ü—É—Å—Ç—å –≤ –∂–∏–∑–Ω–∏ –±—É–¥–µ—Ç –±–æ–ª—å—à–µ —Ä–∞–¥–æ—Å—Ç–∏, —è—Ä–∫–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤ –∏ —Å—á–∞—Å—Ç–ª–∏–≤—ã—Ö –¥–Ω–µ–π ‚ù§Ô∏è</p>
  </section>

  <!-- –ü–æ–¥–∞—Ä–æ–∫ -->
  <section id="gift">
    <h2>Gift üéÅ</h2>
    <p>–•–º–º, —Ç—É—Ç –Ω—É–∂–µ–Ω –ø–∞—Ä–æ–ª—å. –ü–æ–ø—Ä–æ–±—É–π –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–Ω–µ–π —Å –Ω–∞—à–µ–π –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤—Å—Ç—Ä–µ—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω–µ—à–Ω–µ–µ —á–∏—Å–ª–æ:</p>
    <input type="password" id="giftPass" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
    <button onclick="checkPassword()">–û—Ç–∫—Ä—ã—Ç—å</button>
    <div id="giftContent" style="display:none;">
      <img src="certificate1.jpg" alt="–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç 1">
      <img src="certificate2.jpg" alt="–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç 2">
    </div>
  </section>

  <!-- –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å -->
  <section id="feedback">
    <h2>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h2>
    <input type="text" placeholder="–í–∞—à–µ –∏–º—è">
    <textarea rows="4" placeholder="–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"></textarea>
    <button>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </section>

  <!-- –ú–µ–Ω—é -->
  <nav>
    <button class="active" onclick="showSection('game')">üéÆ</button>
    <button onclick="showSection('congrats')">üíå</button>
    <button onclick="showSection('gift')">üéÅ</button>
    <button onclick="showSection('feedback')">‚úçÔ∏è</button>
  </nav>

  <script>
    /* –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–π */
    function showSection(id) {
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      event.target.classList.add('active');
    }

    /* –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è –∫ –ø–æ–¥–∞—Ä–∫—É */
    function checkPassword() {
      const pass = document.getElementById('giftPass').value;
      if (pass === "1234") {
        document.getElementById('giftContent').style.display = 'block';
      } else {
        alert("–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!");
      }
    }

    // --------- –ò–ì–†–ê ---------
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const overBox = document.getElementById("gameOverBox");
    const overText = document.getElementById("gameOverText");

    let bird, pipes, frame, score, gameOver;
    let clouds = [];

    /* –û–±–ª–∞–∫–∞ */
    function initClouds() {
      clouds = Array.from({ length: 6 }, () => ({
        x: Math.random() * canvas.width,
        y: Math.random() * (canvas.height * 0.4) + 20,
        r: 20 + Math.random() * 25,
        speed: 0.2 + Math.random() * 0.4
      }));
    }
    function updateClouds() {
      clouds.forEach(c => {
        c.x -= c.speed;
        if (c.x < -c.r * 3) {
          c.x = canvas.width + c.r * 3;
          c.y = Math.random() * (canvas.height * 0.4) + 20;
          c.r = 20 + Math.random() * 25;
          c.speed = 0.2 + Math.random() * 0.4;
        }
      });
    }
    function drawClouds() {
      ctx.save();
      ctx.globalAlpha = 0.85;
      ctx.fillStyle = "#ffffff";
      clouds.forEach(c => {
        ctx.beginPath();
        ctx.ellipse(c.x, c.y, c.r, c.r * 0.6, 0, 0, Math.PI * 2);
        ctx.fill();
      });
      ctx.restore();
    }

    function initGame() {
      bird = { x: 50, y: 150, width: 30, height: 30, gravity: 0.6, lift: -8, velocity: 0 };
      pipes = [];
      frame = 0;
      score = 0;
      gameOver = false;
      document.getElementById("score").innerText = "–û—á–∫–∏: 0";
      overBox.style.display = "none";
      initClouds();
    }

    function drawBird() {
      ctx.font = "30px Arial";
      ctx.fillText("üíõ", bird.x - 15, bird.y + 10);
    }
    function updateBird() {
      bird.velocity += bird.gravity;
      bird.y += bird.velocity;
      if (bird.y + bird.height / 2 >= canvas.height) gameOver = true;
      if (bird.y - bird.height / 2 <= 0) {
        bird.y = bird.height / 2; bird.velocity = 0;
      }
    }
// –°–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–π –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫
function roundedRect(ctx, x, y, w, h, r) {
  const rr = Math.min(r, w/2, h/2);
  ctx.beginPath();
  ctx.moveTo(x + rr, y);
  ctx.arcTo(x + w, y,     x + w, y + rr, rr);
  ctx.arcTo(x + w, y + h, x + w - rr, y + h, rr);
  ctx.arcTo(x,     y + h, x,     y + h - rr, rr);
  ctx.arcTo(x,     y,     x + rr, y, rr);
  ctx.closePath();
}

function makePipeGradient(y, y2) {
  const g = ctx.createLinearGradient(0, y, 0, y2);
  // —Å–≤–µ—Ç–ª–µ–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É, —Ç–µ–º–Ω–µ–µ —Å –∫—Ä–∞—ë–≤
  g.addColorStop(0,   '#4caf50');
  g.addColorStop(0.5, '#66bb6a');
  g.addColorStop(1,   '#388e3c');
  return g;
}

function drawHighlight(x, y, h) {
  // —É–∑–∫–∏–π –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –±–ª–∏–∫
  ctx.save();
  ctx.globalAlpha = 0.25;
  ctx.fillStyle = '#ffffff';
  ctx.fillRect(x + 6, y + 8, 6, h - 16);
  ctx.restore();
}

function drawCap(x, y, w, h) {
  // ¬´–∫—Ä—ã—à–∫–∞¬ª —Ç—Ä—É–±—ã (—Ç–æ–ª—â–µ, —á—É—Ç–æ—á–∫—É —Ç–µ–º–Ω–µ–µ)
  const r = 8;
  const grad = ctx.createLinearGradient(0, y, 0, y + h);
  grad.addColorStop(0, '#2e7d32');
  grad.addColorStop(1, '#1b5e20');

  ctx.fillStyle = grad;
  roundedRect(ctx, x - 6, y, w + 12, h, r);
  ctx.fill();

  // –≤–µ—Ä—Ö–Ω—è—è —Ç–æ–Ω–∫–∞—è –ª–∏–Ω–∏—è –±–ª–∏–∫–∞
  ctx.save();
  ctx.globalAlpha = 0.35;
  ctx.fillStyle = '#ffffff';
  roundedRect(ctx, x - 4, y + 3, w + 8, 4, 2);
  ctx.fill();
  ctx.restore();

  // –æ–±–≤–æ–¥–∫–∞
  ctx.strokeStyle = '#1b5e20';
  ctx.lineWidth = 2;
  roundedRect(ctx, x - 6, y, w + 12, h, r);
  ctx.stroke();
}

function drawPipeBody(x, y, w, h, radius = 10) {
  const grad = makePipeGradient(y, y + h);

  // —Ç–µ–Ω—å
  ctx.save();
  ctx.fillStyle = 'rgba(0,0,0,0.15)';
  roundedRect(ctx, x + 3, y + 3, w, h, radius);
  ctx.fill();
  ctx.restore();

  // —Ç–µ–ª–æ —Ç—Ä—É–±—ã
  ctx.fillStyle = grad;
  roundedRect(ctx, x, y, w, h, radius);
  ctx.fill();

  // –±–ª–∏–∫
  drawHighlight(x, y, h);

  // –æ–±–≤–æ–¥–∫–∞
  ctx.strokeStyle = '#1b5e20';
  ctx.lineWidth = 2;
  roundedRect(ctx, x, y, w, h, radius);
  ctx.stroke();
}

    function drawPipes() {
  const lipH = 16;             // –≤—ã—Å–æ—Ç–∞ ¬´–∫—Ä—ã—à–∫–∏¬ª
  const radius = 10;           // —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤

  pipes.forEach(pipe => {
    const x = pipe.x;
    const w = pipe.width;

    // –í–ï–†–•–ù–Ø–Ø —Ç—Ä—É–±–∞
    // —Ç–µ–ª–æ
    drawPipeBody(x, 0, w, pipe.top, radius);
    // –∫—Ä—ã—à–∫–∞ —Å–Ω–∏–∑—É –≤–µ—Ä—Ö–Ω–µ–π —Ç—Ä—É–±—ã
    drawCap(x, pipe.top - lipH, w, lipH);

    // –ù–ò–ñ–ù–Ø–Ø —Ç—Ä—É–±–∞
    const bottomY = canvas.height - pipe.bottom;
    // –∫—Ä—ã—à–∫–∞ —Å–≤–µ—Ä—Ö—É –Ω–∏–∂–Ω–µ–π —Ç—Ä—É–±—ã
    drawCap(x, bottomY, w, lipH);
    // —Ç–µ–ª–æ
    drawPipeBody(x, bottomY + lipH, w, pipe.bottom - lipH, radius);
  });
}

    function updatePipes() {
      // —Ä–µ–∂–µ —Å–ø–∞–≤–Ω–∏–º –¥–ª—è –±–æ–ª—å—à–µ–≥–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –∑–∞–∑–æ—Ä–∞
      if (frame % 140 === 0) {
        let top = Math.random() * (canvas.height / 2);
        let gap = 150; // –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –∑–∞–∑–æ—Ä
        let bottom = canvas.height - top - gap;
        pipes.push({ x: canvas.width, width: 50, top, bottom });
      }
      pipes.forEach(pipe => {
        pipe.x -= 2;
        // —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ
        if (
          bird.x + bird.width / 2 > pipe.x &&
          bird.x - bird.width / 2 < pipe.x + pipe.width &&
          (bird.y - bird.height / 2 < pipe.top ||
           bird.y + bird.height / 2 > canvas.height - pipe.bottom)
        ) gameOver = true;

        // –æ—á–∫–∏ (–∫–∞–∫ –±—ã–ª–æ —É —Ç–µ–±—è)
        if (pipe.x + pipe.width === bird.x) {
          score++;
          document.getElementById("score").innerText = "–û—á–∫–∏: " + score;
        }
      });
      pipes = pipes.filter(pipe => pipe.x + pipe.width > 0);
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawClouds();
      drawPipes();
      drawBird();
    }
    function update() { updateClouds(); updateBird(); updatePipes(); }

    function loop() {
      if (gameOver) {
        // –¢–µ–∫—Å—Ç –ø–æ —Ç–≤–æ–∏–º –ø—Ä–∞–≤–∏–ª–∞–º
        if (score === 9) {
          overText.innerHTML = "–¢—ã –Ω–∞–ø–æ–ª–Ω—è–µ—à—å —Ç–∏—à–∏–Ω—É —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ–º –∏ —Å–≤–µ—Ç–æ–º";
        }  else if (score === 17) {
          overText.innerHTML = "–í —Ç–≤–æ–∏—Ö —É–ª—ã–±–∫–∞—Ö —Å–≤–µ—Ç —Ä–∞—Å—Å–≤–µ—Ç–∞";
          }  else if (score === 21) {
          overText.innerHTML = "–¢—ã —É–∫—Ä–∞—à–∞–µ—à—å —Å–æ–±–æ–π –≤–µ—Å—å –º–∏—Ä";
        } else if (score === 32) {
          overText.innerHTML = "–¢—ã –ø—Ä–∏–¥–∞—ë—à—å –º–æ–º–µ–Ω—Ç–∞–º –æ—Å–æ–±—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å";
        } else {
          overText.innerHTML = "–û—Ç–ª–∏—á–Ω–æ! <br> –ü–æ–ø—Ä–æ–±—É–µ–º –µ—â—ë?";
        }
        overBox.style.display = "block"; // –ø–æ–∫–∞–∑–∞—Ç—å –±–ª–æ–∫ —Å —Ç–µ–∫—Å—Ç–æ–º –∏ –∫–Ω–æ–ø–∫–æ–π
        return;
      }
      update(); draw();
      frame++;
      requestAnimationFrame(loop);
    }

    function restartGame() { initGame(); loop(); }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ø—Ä—ã–∂–æ–∫ —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã (—Ä–µ—Å—Ç–∞—Ä—Ç ‚Äî –ø–æ –∫–Ω–æ–ø–∫–µ)
    document.addEventListener("keydown", () => { if (!gameOver) bird.velocity = bird.lift; });
    document.addEventListener("click", () => { if (!gameOver) bird.velocity = bird.lift; });

    initGame();
    loop();
  </script>
</body>
</html>
